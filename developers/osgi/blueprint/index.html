
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://solarnetwork.github.io/solarnode-handbook/developers/osgi/blueprint/" rel="canonical"/>
<link href="../configuration-admin/" rel="prev"/>
<link href="../blueprint-compendium/" rel="next"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.11" name="generator"/>
<title>Blueprint - SolarNode Handbook</title>
<link href="../../../assets/stylesheets/main.4af4bdda.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../css/sn.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="amber" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#blueprint">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="SolarNode Handbook" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="SolarNode Handbook">
<img alt="logo" src="../../../images/solarnode-icon.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            SolarNode Handbook
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Blueprint
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="amber" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="amber" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="SolarNode Handbook" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="SolarNode Handbook">
<img alt="logo" src="../../../images/solarnode-icon.svg"/>
</a>
    SolarNode Handbook
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../users/">
<span class="md-ellipsis">
    User Guide
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/getting-started/">
<span class="md-ellipsis">
    Getting Started
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../users/setup-app/">
<span class="md-ellipsis">
    Setup App
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_3">
<span class="md-nav__icon md-icon"></span>
            Setup App
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/login/">
<span class="md-ellipsis">
    Login
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/home/">
<span class="md-ellipsis">
    Home
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_3_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../users/setup-app/settings/">
<span class="md-ellipsis">
    Settings
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1_3_4" id="__nav_1_3_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_3_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_1_3_4">
<span class="md-nav__icon md-icon"></span>
            Settings
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/settings/components/">
<span class="md-ellipsis">
    Components
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/settings/services/">
<span class="md-ellipsis">
    Services
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/settings/datum-filters/">
<span class="md-ellipsis">
    Datum Filters
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/settings/datum-sources/">
<span class="md-ellipsis">
    Datum Sources
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/settings/logging/">
<span class="md-ellipsis">
    Logging
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/settings/op-modes/">
<span class="md-ellipsis">
    Operational Modes
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/settings/local-state/">
<span class="md-ellipsis">
    Local State
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/settings/backups/">
<span class="md-ellipsis">
    Backups
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_3_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../users/setup-app/system/">
<span class="md-ellipsis">
    System
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1_3_5" id="__nav_1_3_5_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_3_5_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_1_3_5">
<span class="md-nav__icon md-icon"></span>
            System
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/system/certificates/">
<span class="md-ellipsis">
    Certificates
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/system/packages/">
<span class="md-ellipsis">
    Packages
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/system/host-aliases/">
<span class="md-ellipsis">
    Host Aliases
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/system/restart/">
<span class="md-ellipsis">
    Restart
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/system/reset/">
<span class="md-ellipsis">
    Reset
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_3_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../users/setup-app/tools/">
<span class="md-ellipsis">
    Tools
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1_3_6" id="__nav_1_3_6_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_3_6_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_1_3_6">
<span class="md-nav__icon md-icon"></span>
            Tools
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/tools/controls/">
<span class="md-ellipsis">
    Controls
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/tools/command-console/">
<span class="md-ellipsis">
    Command Console
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/tools/metrics/">
<span class="md-ellipsis">
    Metrics
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/profile/">
<span class="md-ellipsis">
    Profile
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum/">
<span class="md-ellipsis">
    Datum
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../users/datum-filters/">
<span class="md-ellipsis">
    Datum Filters
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1_5" id="__nav_1_5_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_5">
<span class="md-nav__icon md-icon"></span>
            Datum Filters
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/chain/">
<span class="md-ellipsis">
    Filter Chain
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/control-updater/">
<span class="md-ellipsis">
    Control Updater
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/downsample/">
<span class="md-ellipsis">
    Downsample
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/expression/">
<span class="md-ellipsis">
    Expression
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/join/">
<span class="md-ellipsis">
    Join
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/metric-harvester/">
<span class="md-ellipsis">
    Metric Harvester
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/op-mode/">
<span class="md-ellipsis">
    Operational Mode
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/parameter-expression/">
<span class="md-ellipsis">
    Parameter Expression
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/property/">
<span class="md-ellipsis">
    Property
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/pvlib/">
<span class="md-ellipsis">
    POAI Calculator
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/split/">
<span class="md-ellipsis">
    Split
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/tariff/">
<span class="md-ellipsis">
    Tariff
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/throttle/">
<span class="md-ellipsis">
    Throttle
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/unchanged-property/">
<span class="md-ellipsis">
    Unchanged Property
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/unchanged/">
<span class="md-ellipsis">
    Unchanged
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/virtual-meter/">
<span class="md-ellipsis">
    Virtual Meter
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/solarflux/">
<span class="md-ellipsis">
    SolarFlux
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_7" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../users/sysadmin/">
<span class="md-ellipsis">
    System Administration
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_7">
<span class="md-nav__icon md-icon"></span>
            System Administration
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/sysadmin/date-time/">
<span class="md-ellipsis">
    Date and Time
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/sysadmin/networking/">
<span class="md-ellipsis">
    Networking
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/sysadmin/packages/">
<span class="md-ellipsis">
    Package Maintenance
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/sysadmin/solarnode-service/">
<span class="md-ellipsis">
    SolarNode Service
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/sysadmin/solarssh/">
<span class="md-ellipsis">
    SolarSSH
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/networking/">
<span class="md-ellipsis">
    Networking
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/security-tokens/">
<span class="md-ellipsis">
    Security Tokens
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/remote-access/">
<span class="md-ellipsis">
    Remote Access
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/expressions/">
<span class="md-ellipsis">
    Expressions
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/local-state/">
<span class="md-ellipsis">
    Local State
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/metrics/">
<span class="md-ellipsis">
    Metrics
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/op-modes/">
<span class="md-ellipsis">
    Operational Modes
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/placeholders/">
<span class="md-ellipsis">
    Placeholders
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/configuration/">
<span class="md-ellipsis">
    Configuration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/settings/">
<span class="md-ellipsis">
    Settings Files
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/logging/">
<span class="md-ellipsis">
    Logging
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../recipes/">
<span class="md-ellipsis">
    Recipes
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Recipes
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../recipes/datum-filters/">
<span class="md-ellipsis">
    Datum Filters
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
            Datum Filters
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../recipes/datum-filters/main-filter-chain/">
<span class="md-ellipsis">
    Main Filter Chain
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../recipes/datum-filters/daily-limit-tracking/">
<span class="md-ellipsis">
    Daily Limit Tracking
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../recipes/datum-filters/peak-tracking/">
<span class="md-ellipsis">
    Peak Tracking
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../">
<span class="md-ellipsis">
    Developer Guide
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    Plugins
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_3_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
            Plugins
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../manifest/">
<span class="md-ellipsis">
    Manifest
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../life-cycle/">
<span class="md-ellipsis">
    Life cycle
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration-admin/">
<span class="md-ellipsis">
    Configuration Admin
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Blueprint
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Blueprint
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#example">
<span class="md-ellipsis">
      Example
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#blueprint-xml-resources">
<span class="md-ellipsis">
      Blueprint XML Resources
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xml-syntax">
<span class="md-ellipsis">
      XML Syntax
    </span>
</a>
<nav aria-label="XML Syntax" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#service-references">
<span class="md-ellipsis">
      Service References
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#components">
<span class="md-ellipsis">
      Components
    </span>
</a>
<nav aria-label="Components" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#constructor-arguments">
<span class="md-ellipsis">
      Constructor Arguments
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#property-accessors">
<span class="md-ellipsis">
      Property Accessors
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#startstop-hooks">
<span class="md-ellipsis">
      Start/Stop Hooks
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#service-registration">
<span class="md-ellipsis">
      Service Registration
    </span>
</a>
<nav aria-label="Service Registration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#multiple-service-interfaces">
<span class="md-ellipsis">
      Multiple Service Interfaces
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#export-service-packages">
<span class="md-ellipsis">
      Export service packages
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../blueprint-compendium/">
<span class="md-ellipsis">
    Blueprint Compendium
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../settings/">
<span class="md-ellipsis">
    Settings
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
            Settings
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../settings/provider/">
<span class="md-ellipsis">
    Settings Provider
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../settings/specifier/">
<span class="md-ellipsis">
    Setting Specifier
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../settings/resource-handler/">
<span class="md-ellipsis">
    Setting Resource Handler
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../settings/singleton/">
<span class="md-ellipsis">
    Singleton Service
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../settings/factory/">
<span class="md-ellipsis">
    Factory Service
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
<span class="md-ellipsis">
    Services
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_4">
<span class="md-nav__icon md-icon"></span>
            Services
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/backup-manager/">
<span class="md-ellipsis">
    Backup Manager
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/closeable-service/">
<span class="md-ellipsis">
    Closeable Service
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/datum-data-source-poll-job/">
<span class="md-ellipsis">
    Datum Data Source Poll Job
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/datum-data-source/">
<span class="md-ellipsis">
    Datum Data Source
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/datum-db/">
<span class="md-ellipsis">
    Datum Database
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/datum-queue/">
<span class="md-ellipsis">
    Datum Queue
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/job-scheduler/">
<span class="md-ellipsis">
    Job Scheduler
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/placeholder-service/">
<span class="md-ellipsis">
    Placeholder Service
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/settings-db/">
<span class="md-ellipsis">
    Settings Database
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/settings-service/">
<span class="md-ellipsis">
    Settings Service
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/sql-database/">
<span class="md-ellipsis">
    SQL Database
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/task-executor/">
<span class="md-ellipsis">
    Task Executor
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/task-scheduler/">
<span class="md-ellipsis">
    Task Scheduler
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#example">
<span class="md-ellipsis">
      Example
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#blueprint-xml-resources">
<span class="md-ellipsis">
      Blueprint XML Resources
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#xml-syntax">
<span class="md-ellipsis">
      XML Syntax
    </span>
</a>
<nav aria-label="XML Syntax" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#service-references">
<span class="md-ellipsis">
      Service References
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#components">
<span class="md-ellipsis">
      Components
    </span>
</a>
<nav aria-label="Components" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#constructor-arguments">
<span class="md-ellipsis">
      Constructor Arguments
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#property-accessors">
<span class="md-ellipsis">
      Property Accessors
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#startstop-hooks">
<span class="md-ellipsis">
      Start/Stop Hooks
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#service-registration">
<span class="md-ellipsis">
      Service Registration
    </span>
</a>
<nav aria-label="Service Registration" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#multiple-service-interfaces">
<span class="md-ellipsis">
      Multiple Service Interfaces
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#export-service-packages">
<span class="md-ellipsis">
      Export service packages
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="blueprint"><span class="enumerate-headings-plugin enumerate-heading-plugin">72.</span> Blueprint<a class="headerlink" href="#blueprint" title="Permanent link">¶</a></h1>
<p>SolarNode supports the OSGi Blueprint Container Specification so plugins can declare their service
dependencies and register their services by way of an XML file deployed with the plugin. If you are
familiar with the <a href="https://docs.spring.io/spring-framework/docs/5.3.0/reference/html/core.html#beans-factory-metadata">Spring Framework's XML configuration</a>, you will find Blueprint
very similar. SolarNode uses the <a href="https://eclipse.org/gemini/blueprint/">Eclipse Gemini</a> implementation of the
Blueprint specification, which is directly derived from Spring Framework.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This guide will not document the full Blueprint XML syntax. Rather, it will attempt to showcase the
most common parts used in SolarNode. Refer to the <a href="https://docs.osgi.org/specification/osgi.cmpn/7.0.0/service.blueprint.html">Blueprint Container
Specification</a> for full details of the specification.</p>
</div>
<h2 id="example"><span class="enumerate-headings-plugin enumerate-heading-plugin">72.1</span> Example<a class="headerlink" href="#example" title="Permanent link">¶</a></h2>
<p>Imagine you are working on a plugin and have a <code>com.example.Greeter</code> interface you would like to
register as a service for other plugins to use, and an implementation of that service in
 <code>com.example.HelloGreeter</code> that relies on the <a href="../../services/placeholder-service/">Placeholder
 Service</a> provided by SolarNode:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">Greeter service</label><label for="__tabbed_1_2">HelloGreeter implementation</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example</span><span class="p">;</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Greeter</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Greet something with a given name.</span>
<span class="cm">     * @param name the name to greet</span>
<span class="cm">     * @return the greeting</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">greet</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>

<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">net.solarnetwork.node.service.PlaceholderService</span><span class="p">;</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">HelloGreeter</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Greeter</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">PlaceholderService</span><span class="w"> </span><span class="n">placeholderService</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">HelloGreeter</span><span class="p">(</span><span class="n">PlaceholderService</span><span class="w"> </span><span class="n">placeholderService</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">super</span><span class="p">();</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">placeholderService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">placeholderService</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">greet</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">placeholderService</span><span class="p">.</span><span class="na">resolvePlaceholders</span><span class="p">(</span>
<span class="w">            </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">"Hello %s, from {myName}."</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">),</span>
<span class="w">            </span><span class="kc">null</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
</input></input></div>
<p>Assuming the <code>PlaceholderService</code> will resolve <code>{name}</code> to <code>Office Node</code>, we would expect the <code>greet()</code> method to
run like this:</p>
<div class="highlight"><pre><span></span><code><span class="n">Greeter</span><span class="w"> </span><span class="n">greeter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resolveGreeterService</span><span class="p">();</span>
<span class="n">String</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">greeter</span><span class="p">.</span><span class="na">greet</span><span class="p">(</span><span class="s">"Joe"</span><span class="p">);</span>
<span class="c1">// result is "Hello Joe, from Office Node."</span>
</code></pre></div>
<p>In the plugin we then need to:</p>
<ol>
<li>Obtain a <code>net.solarnetwork.node.service.PlaceholderService</code> to pass to the
    <code>HelloGreeter(PlaceholderService)</code> constructor</li>
<li>Register  the <code>HelloGreeter</code> comopnent as a <code>com.example.Greeter</code> service in the SolarNode
    platform</li>
</ol>
<p>Here is an example Blueprint XML document that does both:</p>
<div class="highlight"><span class="filename">Blueprint XML example</span><pre><span></span><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;blueprint</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.osgi.org/xmlns/blueprint/v1.0.0"</span>
<span class="w">    </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
<span class="w">    </span><span class="na">xsi:schemaLocation=</span><span class="s">"</span>
<span class="s">        http://www.osgi.org/xmlns/blueprint/v1.0.0</span>
<span class="s">        https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd"</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Declare a reference (lookup) to the PlaceholderService --&gt;</span>
<span class="w">    </span><span class="nt">&lt;reference</span><span class="w"> </span><span class="na">id=</span><span class="s">"placeholderService"</span>
<span class="w">        </span><span class="na">interface=</span><span class="s">"net.solarnetwork.node.service.PlaceholderService"</span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="nt">&lt;service</span><span class="w"> </span><span class="na">interface=</span><span class="s">"com.example.Greeter"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.example.HelloGreeter"</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;argument</span><span class="w"> </span><span class="na">ref=</span><span class="s">"placeholderService"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;/bean&gt;</span>
<span class="w">    </span><span class="nt">&lt;/service&gt;</span>

<span class="nt">&lt;/blueprint&gt;</span>
</code></pre></div>
<h2 id="blueprint-xml-resources"><span class="enumerate-headings-plugin enumerate-heading-plugin">72.2</span> Blueprint XML Resources<a class="headerlink" href="#blueprint-xml-resources" title="Permanent link">¶</a></h2>
<p>Blueprint XML documents are added to a plugin's <code>OSGI-INF/blueprint</code> classpath location. A plugin
can provide any number of Blueprint XML documents there, but often a single file is sufficient and
a common convention in SolarNode is to name it <code>module.xml</code>.</p>
<h2 id="xml-syntax"><span class="enumerate-headings-plugin enumerate-heading-plugin">72.3</span> XML Syntax<a class="headerlink" href="#xml-syntax" title="Permanent link">¶</a></h2>
<p>A minimal Blueprint XML file is structured like this:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;blueprint</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.osgi.org/xmlns/blueprint/v1.0.0"</span>
<span class="w">    </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
<span class="w">    </span><span class="na">xsi:schemaLocation=</span><span class="s">"</span>
<span class="s">        http://www.osgi.org/xmlns/blueprint/v1.0.0</span>
<span class="s">        https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd"</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Plugin components configured here --&gt;</span>

<span class="nt">&lt;/blueprint&gt;</span>
</code></pre></div>
<h3 id="service-references"><span class="enumerate-headings-plugin enumerate-heading-plugin">72.3.1</span> Service References<a class="headerlink" href="#service-references" title="Permanent link">¶</a></h3>
<p>To make use of services registered by SolarNode plugins, you declare a <em>reference</em> to that service
so you may refer to it elsewhere within the Blueprint XML. For example, imagine you wanted to use
the <a href="../../services/placeholder-service/">Placeholder Service</a> in your component. You would obtain a
reference to that like this:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;reference</span><span class="w"> </span><span class="na">id=</span><span class="s">"placeholderService"</span>
<span class="w">    </span><span class="na">interface=</span><span class="s">"net.solarnetwork.node.service.PlaceholderService"</span><span class="nt">/&gt;</span>
</code></pre></div>
<p>The <code>id</code> attribute allows you to refer to this service elsewhere in your Blueprint XML, while
<code>interface</code> declares the fully-qualified Java interface of the service you want to use.</p>
<h3 id="components"><span class="enumerate-headings-plugin enumerate-heading-plugin">72.3.2</span> Components<a class="headerlink" href="#components" title="Permanent link">¶</a></h3>
<p>Components in Blueprint are Java classes you would like instantiated when your plugin starts. They are
declared using a <code>&lt;bean&gt;</code> element in Blueprint XML. You can assign each component a unique identifier using
an <code>id</code> attribute, and then you can refer to that component in other components.</p>
<p>Imagine an example component class <code>com.example.MyComponent</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">net.solarnetwork.node.service.PlaceholderService</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyComponent</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">PlaceholderService</span><span class="w"> </span><span class="n">placeholderService</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">minimum</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">MyComponent</span><span class="p">(</span><span class="n">PlaceholderService</span><span class="w"> </span><span class="n">placeholderService</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">super</span><span class="p">();</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">placeholderService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">placeholderService</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">go</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">PlaceholderService</span><span class="p">.</span><span class="na">resolvePlaceholders</span><span class="p">(</span><span class="n">placeholderService</span><span class="p">,</span>
<span class="w">                </span><span class="s">"{building}/temp"</span><span class="p">,</span><span class="w"> </span><span class="kc">null</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getMinimum</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">minimum</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setMinimum</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">minimum</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">minimum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">minimum</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Here is how that component could be declared in Blueprint:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;reference</span><span class="w"> </span><span class="na">id=</span><span class="s">"placeholderService"</span>
<span class="w">    </span><span class="na">interface=</span><span class="s">"net.solarnetwork.node.service.PlaceholderService"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"myComponent"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.example.MyComponent"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;argument</span><span class="w"> </span><span class="na">ref=</span><span class="s">"placeholderService"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"minimum"</span><span class="w"> </span><span class="na">value=</span><span class="s">"10"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</code></pre></div>
<h4 id="constructor-arguments"><span class="enumerate-headings-plugin enumerate-heading-plugin">72.3.2.1</span> Constructor Arguments<a class="headerlink" href="#constructor-arguments" title="Permanent link">¶</a></h4>
<p>If your component requires any constructor arguments, they can be specified with nested <code>&lt;argument&gt;</code>
elements in Blueprint. The <code>&lt;argument&gt;</code> value can be specified as a reference to another component
using a <code>ref</code> attribute whose value is the <code>id</code> of that component, or as a literal value using a
<code>value</code> attribute.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"myComponent"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.example.MyComponent"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;argument</span><span class="w"> </span><span class="na">ref=</span><span class="s">"placeholderService"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;argument</span><span class="w"> </span><span class="na">value=</span><span class="s">"10"</span><span class="nt">&gt;</span>
</code></pre></div>
<h4 id="property-accessors"><span class="enumerate-headings-plugin enumerate-heading-plugin">72.3.2.2</span> Property Accessors<a class="headerlink" href="#property-accessors" title="Permanent link">¶</a></h4>
<p>You can configure mutable class properties on a component with nested <code>&lt;property name=""&gt;</code> elements
in Blueprint. A <em>mutable property</em> is a Java setter method. For example an <code>int</code> property <code>minimum</code>
would be associated with a Java setter method <code class="highlight"><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setMinimum</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="p">)</span></code>.</p>
<p>The <code>&lt;property&gt;</code> value can be specified as a reference to another component
using a <code>ref</code> attribute whose value is the <code>id</code> of that component, or as a literal value using a
<code>value</code> attribute.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"myComponent"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.example.MyComponent"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"placeholderService"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"placeholderService"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;argument</span><span class="w"> </span><span class="na">name=</span><span class="s">"minimum"</span><span class="w"> </span><span class="na">value=</span><span class="s">"10"</span><span class="nt">&gt;</span>
</code></pre></div>
<h4 id="startstop-hooks"><span class="enumerate-headings-plugin enumerate-heading-plugin">72.3.2.3</span> Start/Stop Hooks<a class="headerlink" href="#startstop-hooks" title="Permanent link">¶</a></h4>
<p>Blueprint can invoke a method on your component when it has finished instantiating and configuring
the object (when the plugin starts), and another when it destroys the instance (when the plugin is
stopped). You simply provide the name of the method you would like Blueprint to call in the
<code>init-method</code> and <code>destroy-method</code> attributes of the <code>&lt;bean&gt;</code> element. For example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"myComponent"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.example.MyComponent"</span>
<span class="w">    </span><span class="na">init-method=</span><span class="s">"startup"</span>
<span class="w">    </span><span class="na">destroy-method=</span><span class="s">"shutdown"</span><span class="nt">&gt;</span>
</code></pre></div>
<h3 id="service-registration"><span class="enumerate-headings-plugin enumerate-heading-plugin">72.3.3</span> Service Registration<a class="headerlink" href="#service-registration" title="Permanent link">¶</a></h3>
<p>You can make any component available to other plugins by <em>registering</em> the component with a
<code>&lt;service&gt;</code> element that declares what interface(s) your component provides. Once registered, other
plugins can make use of your component, for example by declaring a <code>&lt;referenece&gt;</code> to your component
class in <em>their</em> Blueprint XML.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can only register Java <em>interfaces</em> as services, not <em>classes</em>.</p>
</div>
<p>For example, imagine a <code>com.example.Startable</code> interface like this:</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example</span><span class="p">;</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Startable</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Start!</span>
<span class="cm">     * @return the result</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">go</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>We could implement that interface in the <code>MyComponent</code> class, like this:</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyComponent</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Startable</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">go</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">"Gone!"</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>We can register <code>MyComponent</code> as a <code>Startable</code> service using a <code>&lt;service&gt;</code> element like this in
Blueprint:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio"><input id="__tabbed_2_2" name="__tabbed_2" type="radio"><div class="tabbed-labels"><label for="__tabbed_2_1">Direct service component</label><label for="__tabbed_2_2">Indirect service component</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">&lt;service</span><span class="w"> </span><span class="na">interface=</span><span class="s">"com.example.Startable"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- The service implementation is nested directly within --&gt;</span>
<span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.example.MyComponent"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/service&gt;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!-- The service implementation is referenced indirectly... --&gt;</span>
<span class="nt">&lt;service</span><span class="w"> </span><span class="na">ref=</span><span class="s">"myComponent"</span><span class="w"> </span><span class="na">interface=</span><span class="s">"com.example.Startable"</span><span class="nt">/&gt;</span>

<span class="cm">&lt;!-- ... to a bean with a matching id attribute --&gt;</span>
<span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"myComponent"</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.example.MyComponent"</span><span class="nt">/&gt;</span>
</code></pre></div>
</div>
</div>
</input></input></div>
<h4 id="multiple-service-interfaces"><span class="enumerate-headings-plugin enumerate-heading-plugin">72.3.3.1</span> Multiple Service Interfaces<a class="headerlink" href="#multiple-service-interfaces" title="Permanent link">¶</a></h4>
<p>You can advertise any number of service interfaces that your component supports, by nesting an <code>&lt;interfaces&gt;</code>
element within the <code>&lt;service&gt;</code> element, in place of the <code>interface</code> attribute. For example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;service</span><span class="w"> </span><span class="na">ref=</span><span class="s">"myComponent"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;interfaces&gt;</span>
<span class="w">        </span><span class="nt">&lt;value&gt;</span>com.example.Startable<span class="nt">&lt;/value&gt;</span>
<span class="w">        </span><span class="nt">&lt;value&gt;</span>com.example.Stopable<span class="nt">&lt;/value&gt;</span>
<span class="w">    </span><span class="nt">&lt;/interfaces&gt;</span>
<span class="nt">&lt;/service&gt;</span>
</code></pre></div>
<h4 id="export-service-packages"><span class="enumerate-headings-plugin enumerate-heading-plugin">72.3.3.2</span> Export service packages<a class="headerlink" href="#export-service-packages" title="Permanent link">¶</a></h4>
<p>For a registered service to be of any use to another plugin, the package the service is defined in
<em>must</em> be <a href="../manifest/#package-exports">exported</a> by the plugin hosting that package. That is
because the plugin wishing to add a <a href="#service-references">reference</a> to the service will need to
<a href="../manifest/#package-dependencies">import</a> the package in order to use it.</p>
<p>For example, the plugin that hosts the <code>com.example.service.MyService</code> service would need a
<a href="../manifest/">manifest</a> file that includes an <a href="../manifest/#package-exports"><code>Export-Package</code></a>
attribute similar to:</p>
<div class="highlight"><pre><span></span><code><span class="na">Export-Package</span><span class="o">:</span><span class="w"> </span><span class="s">com.example.service;version="1.0.0"</span>
</code></pre></div>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "content.code.copy", "navigation.indexes", "navigation.instant", "navigation.path", "navigation.tracking", "toc.follow"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
<script src="../../../js/open_in_new_tab.js"></script>
</body>
</html>