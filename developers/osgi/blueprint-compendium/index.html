
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://solarnetwork.github.io/solarnode-handbook/developers/osgi/blueprint-compendium/" rel="canonical"/>
<link href="../blueprint/" rel="prev"/>
<link href="../../settings/" rel="next"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-9.1.7" name="generator"/>
<title>Blueprint Compendium - SolarNode Handbook</title>
<link href="../../../assets/stylesheets/main.ded33207.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.a0c5b2b5.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../css/sn.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="amber" data-md-color-scheme="default" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#gemini-blueprint-compendium">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="SolarNode Handbook" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="SolarNode Handbook">
<img alt="logo" src="../../../images/solarnode-icon.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            SolarNode Handbook
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Blueprint Compendium
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="amber" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="amber" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="SolarNode Handbook" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="SolarNode Handbook">
<img alt="logo" src="../../../images/solarnode-icon.svg"/>
</a>
    SolarNode Handbook
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../users/">User Guide</a>
<label for="__nav_1">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/getting-started/">
        Getting Started
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../users/setup-app/">Setup App</a>
<label for="__nav_1_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_3">
<span class="md-nav__icon md-icon"></span>
          Setup App
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/login/">
        Login
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/home/">
        Home
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/certificates/">
        Certificates
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_3_5" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../users/setup-app/settings/">Settings</a>
<label for="__nav_1_3_5">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_3_5_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_1_3_5">
<span class="md-nav__icon md-icon"></span>
          Settings
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/settings/components/">
        Components
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/settings/services/">
        Services
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/settings/datum-filters/">
        Datum Filters
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/settings/logging/">
        Logging
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/settings/op-modes/">
        Operational Modes
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/settings/backups/">
        Backups
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_3_6" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../users/setup-app/tools/">Tools</a>
<label for="__nav_1_3_6">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_3_6_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_1_3_6">
<span class="md-nav__icon md-icon"></span>
          Tools
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/tools/controls/">
        Controls
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/tools/command-console/">
        Command Console
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/plugins/">
        Plugins
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/setup-app/profile/">
        Profile
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum/">
        Datum
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_5" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../users/datum-filters/">Datum Filters</a>
<label for="__nav_1_5">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_5">
<span class="md-nav__icon md-icon"></span>
          Datum Filters
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/chain/">
        Filter Chain
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/control-updater/">
        Control Updater
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/downsample/">
        Downsample
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/expression/">
        Expression
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/join/">
        Join
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/op-mode/">
        Operational Mode
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/parameter-expression/">
        Parameter Expression
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/property/">
        Property
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/split/">
        Split
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/tariff/">
        Tariff
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/throttle/">
        Throttle
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/unchanged-property/">
        Unchanged Property
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/unchanged/">
        Unchanged
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/datum-filters/virtual-meter/">
        Virtual Meter
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/solarflux/">
        SolarFlux
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_7" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../../users/sysadmin/">System Administration</a>
<label for="__nav_1_7">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_7">
<span class="md-nav__icon md-icon"></span>
          System Administration
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/sysadmin/date-time/">
        Date and Time
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/sysadmin/networking/">
        Networking
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/sysadmin/packages/">
        Package Maintenance
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/sysadmin/solarnode-service/">
        SolarNode Service
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/sysadmin/solarssh/">
        SolarSSH
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/networking/">
        Networking
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/security-tokens/">
        Security Tokens
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/remote-access/">
        Remote Access
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/expressions/">
        Expressions
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/op-modes/">
        Operational Modes
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/placeholders/">
        Placeholders
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/configuration/">
        Configuration
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/settings/">
        Settings Files
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../users/logging/">
        Logging
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../">Developer Guide</a>
<label for="__nav_2">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          Developer Guide
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../">Plugins</a>
<label for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
          Plugins
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../manifest/">
        Manifest
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../life-cycle/">
        Life cycle
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration-admin/">
        Configuration Admin
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../blueprint/">
        Blueprint
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Blueprint Compendium
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Blueprint Compendium
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#managed-properties">
    Managed Properties
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#managed-service-factory">
    Managed Service Factory
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../settings/">Settings</a>
<label for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
          Settings
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../settings/provider/">
        Settings Provider
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../settings/specifier/">
        Setting Specifier
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../settings/resource-handler/">
        Setting Resource Handler
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../settings/singleton/">
        Singleton Service
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../settings/factory/">
        Factory Service
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          Services
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
          Services
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/backup-manager/">
        Backup Manager
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/closeable-service/">
        Closeable Service
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/datum-data-source-poll-job/">
        Datum Data Source Poll Job
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/datum-data-source/">
        Datum Data Source
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/datum-db/">
        Datum Database
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/datum-queue/">
        Datum Queue
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/job-scheduler/">
        Job Scheduler
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/placeholder-service/">
        Placeholder Service
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/settings-db/">
        Settings Database
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/settings-service/">
        Settings Service
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/sql-database/">
        SQL Database
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/task-executor/">
        Task Executor
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../services/task-scheduler/">
        Task Scheduler
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#managed-properties">
    Managed Properties
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#managed-service-factory">
    Managed Service Factory
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="gemini-blueprint-compendium"><span class="enumerate-headings-plugin enumerate-heading-plugin">57.</span> Gemini Blueprint Compendium<a class="headerlink" href="#gemini-blueprint-compendium" title="Permanent link">¶</a></h1>
<p>The Gemini Blueprint implementation provides some useful extensions that SolarNode makes frequent use of.
 To use the extensions you need to declare the Gemini Blueprint Compendium namespace in your Blueprint
 XML file, like this:</p>
<div class="highlight"><span class="filename">Gemini Blueprint Compendium XML declaration</span><pre><span></span><code><span class="nt">&lt;blueprint</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.osgi.org/xmlns/blueprint/v1.0.0"</span>
<span class="w">    </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
<span class="w">    </span><span class="na">xmlns:osgix=</span><span class="s">"http://www.eclipse.org/gemini/blueprint/schema/blueprint-compendium"</span>
<span class="w">    </span><span class="na">xmlns:beans=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
<span class="w">    </span><span class="na">xsi:schemaLocation=</span><span class="s">"</span>
<span class="s">        http://www.osgi.org/xmlns/blueprint/v1.0.0</span>
<span class="s">        http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd</span>
<span class="s">        http://www.eclipse.org/gemini/blueprint/schema/blueprint-compendium</span>
<span class="s">        http://www.eclipse.org/gemini/blueprint/schema/blueprint-compendium/gemini-blueprint-compendium.xsd</span>
<span class="s">        http://www.springframework.org/schema/beans</span>
<span class="s">        http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>
</code></pre></div>
<p>This example declares the Gemini Blueprint Compendium XML namespace prefix <code>osgix</code> and a related Spring Beans
namespace prefix <code>beans</code>. You will see those used throughout SolarNode.</p>
<h2 id="managed-properties"><span class="enumerate-headings-plugin enumerate-heading-plugin">57.1</span> Managed Properties<a class="headerlink" href="#managed-properties" title="Permanent link">¶</a></h2>
<p>Managed Properties provide a way to use the <a href="../configuration-admin/">Configuration Admin</a> service to
manage user-configurable service properties. Conceptually it is like linking a class to a set of
dynamic runtime <a href="../../settings/">Settings</a>: Configuration Admin provides change event and
persistence APIs for the settings, and the Managed Properties applies those settings to the linked
service.</p>
<p>Imagine you have a service class <code>MyService</code> with a configurable property <code>level</code>. We can make
that property a managed, persistable setting by adding a <code>&lt;osgix:managed-properties&gt;</code> element to
our Blueprint XML, like this:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><input id="__tabbed_1_3" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">MyService class</label><label for="__tabbed_1_2">MyService localization</label><label for="__tabbed_1_3">Blueprint XML</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Collections</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">net.solarnetwork.node.service.support.BaseIdentifiable</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">net.solarnetwork.settings.SettingSpecifier</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">net.solarnetwork.settings.SettingSpecifierProvider</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">net.solarnetwork.settings.SettingsChangeObserver</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">net.solarnetwork.settings.support.BasicTextFieldSettingSpecifier</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * My super-duper service.</span>
<span class="cm"> *</span>
<span class="cm"> * @author matt</span>
<span class="cm"> * @version 1.0</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyService</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">BaseIdentifiable</span>
<span class="w">        </span><span class="kd">implements</span><span class="w"> </span><span class="n">SettingsChangeObserver</span><span class="p">,</span><span class="w"> </span><span class="n">SettingSpecifierProvider</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">level</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getSettingUid</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">"com.example.MyService"</span><span class="p">;</span><span class="w"> </span><span class="c1">// (1)!</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">SettingSpecifier</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getSettingSpecifiers</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Collections</span><span class="p">.</span><span class="na">singletonList</span><span class="p">(</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BasicTextFieldSettingSpecifier</span><span class="p">(</span><span class="s">"level"</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="mi">0</span><span class="p">)));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configurationChanged</span><span class="p">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">properties</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// the settings have changed; do something</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getLevel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">level</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setLevel</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">level</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">level</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
<ol>
<li>The setting UID will be the Configuration Admin PID</li>
</ol>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="na">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">Super-duper Service</span>
<span class="na">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">This service does it all.</span>

<span class="na">level.key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">Level</span>
<span class="na">level.desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">This one goes to 11.</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;blueprint</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.osgi.org/xmlns/blueprint/v1.0.0"</span>
<span class="w">    </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
<span class="w">    </span><span class="na">xmlns:osgix=</span><span class="s">"http://www.eclipse.org/gemini/blueprint/schema/blueprint-compendium"</span>
<span class="w">    </span><span class="na">xmlns:beans=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
<span class="w">    </span><span class="na">xsi:schemaLocation=</span><span class="s">"</span>
<span class="s">        http://www.osgi.org/xmlns/blueprint/v1.0.0</span>
<span class="s">        http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd</span>
<span class="s">        http://www.eclipse.org/gemini/blueprint/schema/blueprint-compendium</span>
<span class="s">        http://www.eclipse.org/gemini/blueprint/schema/blueprint-compendium/gemini-blueprint-compendium.xsd</span>
<span class="s">        http://www.springframework.org/schema/beans</span>
<span class="s">        http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;service&gt;</span>
<span class="w">        </span><span class="nt">&lt;interfaces&gt;</span>
<span class="w">            </span><span class="nt">&lt;value&gt;</span>net.solarnetwork.settings.SettingSpecifierProvider<span class="nt">&lt;/value&gt;</span>
<span class="w">        </span><span class="nt">&lt;/interfaces&gt;</span>
<span class="w">        </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.example.MyService"</span><span class="nt">&gt;</span><span class="cm">&lt;!-- (1)! --&gt;</span>
<span class="w">            </span><span class="nt">&lt;osgix:managed-properties</span>
<span class="w">                    </span><span class="na">persistent-id=</span><span class="s">"com.example.MyService"</span>
<span class="w">                    </span><span class="na">autowire-on-update=</span><span class="s">"true"</span>
<span class="w">                    </span><span class="na">update-method=</span><span class="s">"configurationChanged"</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"messageSource"</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">"org.springframework.context.support.ResourceBundleMessageSource"</span><span class="nt">&gt;</span>
<span class="w">                    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"basenames"</span><span class="w"> </span><span class="na">value=</span><span class="s">"com.example.MyService"</span><span class="nt">/&gt;</span>
<span class="w">                </span><span class="nt">&lt;/bean&gt;</span>
<span class="w">            </span><span class="nt">&lt;/property&gt;</span>
<span class="w">        </span><span class="nt">&lt;/bean&gt;</span>
<span class="w">    </span><span class="nt">&lt;/service&gt;</span>

<span class="nt">&lt;/blueprint&gt;</span>
</code></pre></div>
<ol>
<li>You nest the <code>&lt;osgi:managed-properties&gt;</code> element within the actual service <code>&lt;bean&gt;</code> element
   you want to apply the managed settings on.<ul>
<li>note how the <code>persistent-id</code> attribute value matches the <code>getSettingsUid()</code> value in
  <code>MyService.java</code></li>
<li>the <code>autowire-on-update</code> method toggles having the Managed Properties automatically applied by
  Gemini Blueprint; you can set to <code>false</code> and provide an <code>update-method</code> if you want to handle
  changes yourself</li>
<li>the <code>update-method</code> attribute is optional; it provides a way for the service to be notified
  after the Configuration Admin settings have been applied.</li>
</ul>
</li>
</ol>
</div>
</div>
</input></input></input></div>
<p>When this plugin is deployed in SolarNode, the component will appear on the main <a href="../../../users/setup-app/settings/">Settings
page</a> and offer a configurable <strong>Level</strong> setting,
like this:</p>
<p><img alt="Example service in Settings UI" src="../../../images/developers/osgi/example-managed-service-settings-ui.png" width="770"/></p>
<h2 id="managed-service-factory"><span class="enumerate-headings-plugin enumerate-heading-plugin">57.2</span> Managed Service Factory<a class="headerlink" href="#managed-service-factory" title="Permanent link">¶</a></h2>
<p>The Managed Service Factory service provide a way to use the <a href="../configuration-admin/">Configuration
Admin</a> service to manage <strong>multiple copies</strong> of a user-configurable
service's properties. Conceptually it is like linking a class to a set of dynamic runtime
<a href="../../settings/">Settings</a>, but you can create as many independent copies as you like.
Configuration Admin provides change event and persistence APIs for the settings, and the Managed
Service Factory applies those settings to each linked service instance.</p>
<p>Imagine you have a service class <code>ManagedService</code> with a configurable property <code>level</code>. We can make
that property a factory of managed, persistable settings by adding a
<code>&lt;osgix:managed-service-factory&gt;</code> element to our Blueprint XML, like this:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio"><input id="__tabbed_2_2" name="__tabbed_2" type="radio"><input id="__tabbed_2_3" name="__tabbed_2" type="radio"><div class="tabbed-labels"><label for="__tabbed_2_1">MyService class</label><label for="__tabbed_2_2">MyService localization</label><label for="__tabbed_2_3">Blueprint XML</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">com.example</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Collections</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">net.solarnetwork.node.service.support.BaseIdentifiable</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">net.solarnetwork.settings.SettingSpecifier</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">net.solarnetwork.settings.SettingSpecifierProvider</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">net.solarnetwork.settings.SettingsChangeObserver</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">net.solarnetwork.settings.support.BasicTextFieldSettingSpecifier</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm"> * My super-duper managed service.</span>
<span class="cm"> *</span>
<span class="cm"> * @author matt</span>
<span class="cm"> * @version 1.0</span>
<span class="cm"> */</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ManagedService</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">BaseIdentifiable</span>
<span class="w">        </span><span class="kd">implements</span><span class="w"> </span><span class="n">SettingsChangeObserver</span><span class="p">,</span><span class="w"> </span><span class="n">SettingSpecifierProvider</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">level</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getSettingUid</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">"com.example.ManagedService"</span><span class="p">;</span><span class="w"> </span><span class="c1">// (1)!</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">SettingSpecifier</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getSettingSpecifiers</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Collections</span><span class="p">.</span><span class="na">singletonList</span><span class="p">(</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">BasicTextFieldSettingSpecifier</span><span class="p">(</span><span class="s">"level"</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">valueOf</span><span class="p">(</span><span class="mi">0</span><span class="p">)));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configurationChanged</span><span class="p">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">properties</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// the settings have changed; do something</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getLevel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">level</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setLevel</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">level</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">level</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
<ol>
<li>The setting UID will be the Configuration Admin factory PID</li>
</ol>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="na">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">Super-duper Managed Service</span>
<span class="na">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">This managed service does it all.</span>

<span class="na">level.key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">Level</span>
<span class="na">level.desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">This one goes to 11.</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;blueprint</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">"http://www.osgi.org/xmlns/blueprint/v1.0.0"</span>
<span class="w">    </span><span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
<span class="w">    </span><span class="na">xmlns:osgix=</span><span class="s">"http://www.eclipse.org/gemini/blueprint/schema/blueprint-compendium"</span>
<span class="w">    </span><span class="na">xmlns:beans=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
<span class="w">    </span><span class="na">xsi:schemaLocation=</span><span class="s">"</span>
<span class="s">        http://www.osgi.org/xmlns/blueprint/v1.0.0</span>
<span class="s">        http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd</span>
<span class="s">        http://www.eclipse.org/gemini/blueprint/schema/blueprint-compendium</span>
<span class="s">        http://www.eclipse.org/gemini/blueprint/schema/blueprint-compendium/gemini-blueprint-compendium.xsd</span>
<span class="s">        http://www.springframework.org/schema/beans</span>
<span class="s">        http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">"messageSource"</span><span class="w"> </span><span class="na">class=</span><span class="s">"org.springframework.context.support.ResourceBundleMessageSource"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"basenames"</span><span class="w"> </span><span class="na">value=</span><span class="s">"com.example.ManagedService"</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/bean&gt;</span>

<span class="w">    </span><span class="nt">&lt;service</span><span class="w"> </span><span class="na">interface=</span><span class="s">"net.solarnetwork.settings.SettingSpecifierProviderFactory"</span><span class="nt">&gt;</span><span class="cm">&lt;!-- (1)! --&gt;</span>
<span class="w">        </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">"net.solarnetwork.settings.support.BasicSettingSpecifierProviderFactory"</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"displayName"</span><span class="w"> </span><span class="na">value=</span><span class="s">"Super-duper Managed Service"</span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"factoryUid"</span><span class="w"> </span><span class="na">value=</span><span class="s">"com.example.ManagedService"</span><span class="nt">/&gt;</span><span class="cm">&lt;!-- (2)! --&gt;</span>
<span class="w">            </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"messageSource"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"messageSource"</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/bean&gt;</span>
<span class="w">    </span><span class="nt">&lt;/service&gt;</span>

<span class="w">    </span><span class="nt">&lt;osgix:managed-service-factory</span>
<span class="w">            </span><span class="na">factory-pid=</span><span class="s">"com.example.ManagedService"</span>
<span class="w">            </span><span class="na">autowire-on-update=</span><span class="s">"true"</span>
<span class="w">            </span><span class="na">update-method=</span><span class="s">"configurationChanged"</span><span class="nt">&gt;</span><span class="cm">&lt;!-- (3)! --&gt;</span>
<span class="w">        </span><span class="nt">&lt;osgix:interfaces&gt;</span>
<span class="w">            </span><span class="nt">&lt;beans:value&gt;</span>net.solarnetwork.settings.SettingSpecifierProvider<span class="nt">&lt;/beans:value&gt;</span>
<span class="w">        </span><span class="nt">&lt;/osgix:interfaces&gt;</span>
<span class="w">        </span><span class="nt">&lt;osgix:service-properties&gt;</span>
<span class="w">            </span><span class="nt">&lt;beans:entry</span><span class="w"> </span><span class="na">key=</span><span class="s">"settingPid"</span><span class="w"> </span><span class="na">value=</span><span class="s">"com.example.ManagedService"</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/osgix:service-properties&gt;</span>
<span class="w">        </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">"com.example.ManagedService"</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">"messageSource"</span><span class="w"> </span><span class="na">ref=</span><span class="s">"messageSource"</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;/bean&gt;</span>
<span class="w">    </span><span class="nt">&lt;/osgix:managed-service-factory&gt;</span>

<span class="nt">&lt;/blueprint&gt;</span>
</code></pre></div>
<ol>
<li>The <code>SettingSpecifierProviderFactory</code> service is what makes the managed service factory
   appear as a component in the SolarNode Settings UI.</li>
<li>The <code>factoryUid</code> defines the Configuration Admin factory PID <strong>and</strong> the Settings UID.</li>
<li>You add a <code>&lt;osgix:managed-service-factory&gt;</code> element in your Blueprint XML, with a nested
   <code>&lt;bean&gt;</code> "template" within it. The template bean will be instantiated for each service
   instance instantiated by the Managed Service Factory.<ul>
<li>note how the <code>factory-pid</code> attribute value matches the <code>getSettingsUid()</code> value in
  <code>ManagedService.java</code> <strong>and</strong> the <code>factoryUid</code> declared in #2.</li>
<li>the <code>autowire-on-update</code> method toggles having the Managed Properties automatically applied by
  Gemini Blueprint; you can set to <code>false</code> and provide an <code>update-method</code> if you want to handle
  changes yourself</li>
<li>the <code>update-method</code> attribute is optional; it provides a way for the service to be notified
  after the Configuration Admin settings have been applied.</li>
</ul>
</li>
</ol>
</div>
</div>
</input></input></input></div>
<p>When this plugin is deployed in SolarNode, the managed component will appear on the main <a href="../../../users/setup-app/settings/">Settings
page</a> like this:</p>
<p><img alt="Example managed service component in Settings UI" src="../../../images/developers/osgi/example-managed-service-factory-component-ui.png" width="740"/></p>
<p>After clicking on the <strong>Manage</strong> button next to this component, the Settings UI allows you to
create any number of <em>instances</em> of the component, each with their own setting values. Here is
a screen shot showing two instances having been created:</p>
<p><img alt="Example managed service component intances in Settings UI" src="../../../images/developers/osgi/example-managed-service-factory-settings-ui.png" width="740"/></p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "content.code.copy", "navigation.indexes", "navigation.instant", "navigation.path", "navigation.tracking", "toc.follow"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../assets/javascripts/bundle.51198bba.min.js"></script>
<script src="../../../js/open_in_new_tab.js"></script>
</body>
</html>