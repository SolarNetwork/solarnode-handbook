
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://solarnetwork.github.io/solarnode-handbook/users/io/modbus-server/" rel="canonical"/>
<link href="../" rel="prev"/>
<link href="../modbus/" rel="next"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.18" name="generator"/>
<title>Modbus Server - SolarNode Handbook</title>
<link href="../../../assets/stylesheets/main.7e37652d.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../css/sn.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="amber" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#modbus-server">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="SolarNode Handbook" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="SolarNode Handbook">
<img alt="logo" src="../../../images/solarnode-icon.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            SolarNode Handbook
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Modbus Server
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="amber" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="amber" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="SolarNode Handbook" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="SolarNode Handbook">
<img alt="logo" src="../../../images/solarnode-icon.svg"/>
</a>
    SolarNode Handbook
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../">
<span class="md-ellipsis">
    User Guide
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../getting-started/">
<span class="md-ellipsis">
    Getting Started
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../setup-app/">
<span class="md-ellipsis">
    Setup App
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_3">
<span class="md-nav__icon md-icon"></span>
            Setup App
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/login/">
<span class="md-ellipsis">
    Login
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/home/">
<span class="md-ellipsis">
    Home
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_3_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../setup-app/settings/">
<span class="md-ellipsis">
    Settings
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1_3_4" id="__nav_1_3_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_3_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_1_3_4">
<span class="md-nav__icon md-icon"></span>
            Settings
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/settings/components/">
<span class="md-ellipsis">
    Components
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/settings/services/">
<span class="md-ellipsis">
    Services
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/settings/datum-filters/">
<span class="md-ellipsis">
    Datum Filters
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/settings/datum-sources/">
<span class="md-ellipsis">
    Datum Sources
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/settings/logging/">
<span class="md-ellipsis">
    Logging
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/settings/op-modes/">
<span class="md-ellipsis">
    Operational Modes
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/settings/local-state/">
<span class="md-ellipsis">
    Local State
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/settings/backups/">
<span class="md-ellipsis">
    Backups
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_3_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../setup-app/system/">
<span class="md-ellipsis">
    System
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1_3_5" id="__nav_1_3_5_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_3_5_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_1_3_5">
<span class="md-nav__icon md-icon"></span>
            System
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/system/certificates/">
<span class="md-ellipsis">
    Certificates
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/system/packages/">
<span class="md-ellipsis">
    Packages
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/system/host-aliases/">
<span class="md-ellipsis">
    Host Aliases
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/system/restart/">
<span class="md-ellipsis">
    Restart
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/system/reset/">
<span class="md-ellipsis">
    Reset
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_3_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../setup-app/tools/">
<span class="md-ellipsis">
    Tools
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1_3_6" id="__nav_1_3_6_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_3_6_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_1_3_6">
<span class="md-nav__icon md-icon"></span>
            Tools
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/tools/controls/">
<span class="md-ellipsis">
    Controls
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/tools/command-console/">
<span class="md-ellipsis">
    Command Console
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/tools/metrics/">
<span class="md-ellipsis">
    Metrics
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setup-app/profile/">
<span class="md-ellipsis">
    Profile
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cli/">
<span class="md-ellipsis">
    Command Line Tool
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum/">
<span class="md-ellipsis">
    Datum
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../datum-sources/">
<span class="md-ellipsis">
    Datum Sources
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_6">
<span class="md-nav__icon md-icon"></span>
            Datum Sources
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-sources/modbus/">
<span class="md-ellipsis">
    Modbus Device
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_7" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../datum-filters/">
<span class="md-ellipsis">
    Datum Filters
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_7">
<span class="md-nav__icon md-icon"></span>
            Datum Filters
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-filters/chain/">
<span class="md-ellipsis">
    Filter Chain
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-filters/control-updater/">
<span class="md-ellipsis">
    Control Updater
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-filters/downsample/">
<span class="md-ellipsis">
    Downsample
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-filters/expression/">
<span class="md-ellipsis">
    Expression
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-filters/join/">
<span class="md-ellipsis">
    Join
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-filters/metric-harvester/">
<span class="md-ellipsis">
    Metric Harvester
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-filters/op-mode/">
<span class="md-ellipsis">
    Operational Mode
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-filters/parameter-expression/">
<span class="md-ellipsis">
    Parameter Expression
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-filters/property/">
<span class="md-ellipsis">
    Property
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-filters/pvlib/">
<span class="md-ellipsis">
    POAI Calculator
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-filters/split/">
<span class="md-ellipsis">
    Split
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-filters/tariff/">
<span class="md-ellipsis">
    Tariff
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-filters/throttle/">
<span class="md-ellipsis">
    Throttle
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-filters/timeout/">
<span class="md-ellipsis">
    Timeout
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-filters/unchanged-property/">
<span class="md-ellipsis">
    Unchanged Property
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-filters/unchanged/">
<span class="md-ellipsis">
    Unchanged
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../datum-filters/virtual-meter/">
<span class="md-ellipsis">
    Virtual Meter
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_8" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../controls/">
<span class="md-ellipsis">
    Controls
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1_8" id="__nav_1_8_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_8">
<span class="md-nav__icon md-icon"></span>
            Controls
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../controls/modbus/">
<span class="md-ellipsis">
    Modbus Control
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_1_9" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    I/O Integrations
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1_9" id="__nav_1_9_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_1_9_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_9">
<span class="md-nav__icon md-icon"></span>
            I/O Integrations
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Modbus Server
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Modbus Server
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#use">
<span class="md-ellipsis">
      Use
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#register-word-order">
<span class="md-ellipsis">
      Register word order
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#data-persistence">
<span class="md-ellipsis">
      Data persistence
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#csv-configurer">
<span class="md-ellipsis">
      CSV Configurer
    </span>
</a>
<nav aria-label="CSV Configurer" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#modbus-server-csv-configuration-format">
<span class="md-ellipsis">
      Modbus Server CSV Configuration Format
    </span>
</a>
<nav aria-label="Modbus Server CSV Configuration Format" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#instance-identifiers">
<span class="md-ellipsis">
      Instance identifiers
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#csv-column-definition">
<span class="md-ellipsis">
      CSV column definition
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-csv">
<span class="md-ellipsis">
      Example CSV
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#additional-server-settings">
<span class="md-ellipsis">
      Additional server settings
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#settings">
<span class="md-ellipsis">
      Settings
    </span>
</a>
<nav aria-label="Settings" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#rtu-settings">
<span class="md-ellipsis">
      RTU settings
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tcp-settings">
<span class="md-ellipsis">
      TCP settings
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#solarnodeos-port-considerations">
<span class="md-ellipsis">
      SolarNodeOS port considerations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#unit-configuration">
<span class="md-ellipsis">
      Unit configuration
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#register-block-configuration">
<span class="md-ellipsis">
      Register block configuration
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#measurement-configuration">
<span class="md-ellipsis">
      Measurement configuration
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#controls">
<span class="md-ellipsis">
      Controls
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../modbus/">
<span class="md-ellipsis">
    Modbus
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../solarflux/">
<span class="md-ellipsis">
    SolarFlux
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1_11" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../sysadmin/">
<span class="md-ellipsis">
    System Administration
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1_11" id="__nav_1_11_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_11_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_1_11">
<span class="md-nav__icon md-icon"></span>
            System Administration
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../sysadmin/date-time/">
<span class="md-ellipsis">
    Date and Time
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sysadmin/networking/">
<span class="md-ellipsis">
    Networking
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sysadmin/packages/">
<span class="md-ellipsis">
    Package Maintenance
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sysadmin/solarnode-service/">
<span class="md-ellipsis">
    SolarNode Service
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../sysadmin/solarssh/">
<span class="md-ellipsis">
    SolarSSH
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../networking/">
<span class="md-ellipsis">
    Networking
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../security-tokens/">
<span class="md-ellipsis">
    Security Tokens
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../remote-access/">
<span class="md-ellipsis">
    Remote Access
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../expressions/">
<span class="md-ellipsis">
    Expressions
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../local-state/">
<span class="md-ellipsis">
    Local State
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../metrics/">
<span class="md-ellipsis">
    Metrics
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../op-modes/">
<span class="md-ellipsis">
    Operational Modes
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../placeholders/">
<span class="md-ellipsis">
    Placeholders
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../configuration/">
<span class="md-ellipsis">
    Configuration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../settings/">
<span class="md-ellipsis">
    Settings Files
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../logging/">
<span class="md-ellipsis">
    Logging
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../recipes/">
<span class="md-ellipsis">
    Recipes
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Recipes
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../recipes/datum-filters/">
<span class="md-ellipsis">
    Datum Filters
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
            Datum Filters
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../recipes/datum-filters/main-filter-chain/">
<span class="md-ellipsis">
    Main Filter Chain
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../recipes/datum-filters/daily-limit-tracking/">
<span class="md-ellipsis">
    Daily Limit Tracking
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../recipes/datum-filters/peak-tracking/">
<span class="md-ellipsis">
    Peak Tracking
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../developers/">
<span class="md-ellipsis">
    Developer Guide
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../developers/osgi/">
<span class="md-ellipsis">
    Plugins
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
            Plugins
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/osgi/manifest/">
<span class="md-ellipsis">
    Manifest
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/osgi/life-cycle/">
<span class="md-ellipsis">
    Life cycle
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/osgi/configuration-admin/">
<span class="md-ellipsis">
    Configuration Admin
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/osgi/blueprint/">
<span class="md-ellipsis">
    Blueprint
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/osgi/blueprint-compendium/">
<span class="md-ellipsis">
    Blueprint Compendium
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../developers/settings/">
<span class="md-ellipsis">
    Settings
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
            Settings
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/settings/provider/">
<span class="md-ellipsis">
    Settings Provider
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/settings/specifier/">
<span class="md-ellipsis">
    Setting Specifier
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/settings/resource-handler/">
<span class="md-ellipsis">
    Setting Resource Handler
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/settings/singleton/">
<span class="md-ellipsis">
    Singleton Service
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/settings/factory/">
<span class="md-ellipsis">
    Factory Service
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
<span class="md-ellipsis">
    Services
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_4">
<span class="md-nav__icon md-icon"></span>
            Services
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/services/backup-manager/">
<span class="md-ellipsis">
    Backup Manager
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/services/closeable-service/">
<span class="md-ellipsis">
    Closeable Service
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/services/datum-data-source-poll-job/">
<span class="md-ellipsis">
    Datum Data Source Poll Job
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/services/datum-data-source/">
<span class="md-ellipsis">
    Datum Data Source
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/services/datum-db/">
<span class="md-ellipsis">
    Datum Database
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/services/datum-queue/">
<span class="md-ellipsis">
    Datum Queue
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/services/job-scheduler/">
<span class="md-ellipsis">
    Job Scheduler
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/services/placeholder-service/">
<span class="md-ellipsis">
    Placeholder Service
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/services/settings-db/">
<span class="md-ellipsis">
    Settings Database
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/services/settings-service/">
<span class="md-ellipsis">
    Settings Service
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/services/sql-database/">
<span class="md-ellipsis">
    SQL Database
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/services/task-executor/">
<span class="md-ellipsis">
    Task Executor
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../developers/services/task-scheduler/">
<span class="md-ellipsis">
    Task Scheduler
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#use">
<span class="md-ellipsis">
      Use
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#register-word-order">
<span class="md-ellipsis">
      Register word order
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#data-persistence">
<span class="md-ellipsis">
      Data persistence
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#csv-configurer">
<span class="md-ellipsis">
      CSV Configurer
    </span>
</a>
<nav aria-label="CSV Configurer" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#modbus-server-csv-configuration-format">
<span class="md-ellipsis">
      Modbus Server CSV Configuration Format
    </span>
</a>
<nav aria-label="Modbus Server CSV Configuration Format" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#instance-identifiers">
<span class="md-ellipsis">
      Instance identifiers
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#csv-column-definition">
<span class="md-ellipsis">
      CSV column definition
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-csv">
<span class="md-ellipsis">
      Example CSV
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#additional-server-settings">
<span class="md-ellipsis">
      Additional server settings
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#settings">
<span class="md-ellipsis">
      Settings
    </span>
</a>
<nav aria-label="Settings" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#rtu-settings">
<span class="md-ellipsis">
      RTU settings
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tcp-settings">
<span class="md-ellipsis">
      TCP settings
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#solarnodeos-port-considerations">
<span class="md-ellipsis">
      SolarNodeOS port considerations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#unit-configuration">
<span class="md-ellipsis">
      Unit configuration
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#register-block-configuration">
<span class="md-ellipsis">
      Register block configuration
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#measurement-configuration">
<span class="md-ellipsis">
      Measurement configuration
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#controls">
<span class="md-ellipsis">
      Controls
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="modbus-server"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.</span> Modbus Server<a class="headerlink" href="#modbus-server" title="Permanent link">¶</a></h1>
<p>SolarNode can host a Modbus TCP or serial (RTU) server populated with data collected by <a href="../datum-sources/">datum
sources</a> or updated though <a href="#controls">controls</a>. This allows other devices to
query SolarNode for data (or update it) using the Modbus protocol. This is an advanced plugin that
requires specific low-level knowledge of the Modbus services you plan to integrate with.</p>
<p>This integration is provided by the <a href="https://github.com/SolarNetwork/solarnetwork-node/tree/develop/net.solarnetwork.node.io.modbus.server">Modbus Server</a> plugin, which is included in the
<a href="https://github.com/SolarNetwork/solarnode-os-packages/tree/develop/solarnode-app-io-modbus-server/debian">solarnode-app-io-modbus-server</a> package in SolarNodeOS.</p>
<h2 id="use"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.1</span> Use<a class="headerlink" href="#use" title="Permanent link">¶</a></h2>
<p>Once installed, <strong>Modbus Server (RTU)</strong> and <strong>Modbus Server (TCP)</strong> components will appear on
the <a href="../../setup-app/settings/components/">Settings &gt; Components</a> page on your SolarNode. Click on the <strong>Manage</strong> button to
configure servers. You will need to add one configuration for each port you want to expose a Modbus
server on.</p>
<figure>
<p><img alt="RTU and TCP Modbus Server components" loading="lazy" src="../../../images/users/io/modbus-servers-components%402x.png" width="860"/></p>
</figure>
<p>Each Modbus server configuration is divided into four parts:</p>
<ol>
<li>Server configuration (e.g. TCP port or serial device)</li>
<li>Unit configuration (e.g. Modbus Unit ID)</li>
<li>Register block configuration (e.g. Modbus register starting address)</li>
<li>Measurement configuration (e.g. mapping data into Modbus registers)</li>
</ol>
<p>Each configuration part contains a list of the subsequent configuration part. That is, a server
configuration can have multiple unit configurations, which can contain multiple register block
configurations, which can have multiple measurement configurations.</p>
<h2 id="register-word-order"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.2</span> Register word order<a class="headerlink" href="#register-word-order" title="Permanent link">¶</a></h2>
<p>All multi-register data (anything more than 16 bits) is stored in <strong>most-to-least significant</strong>
register (word) order, sometimes referred to as <em>big endian</em> or <em>network</em> order. Specifically, the
highest bits of the data are stored first, in smaller numbered registers, followed by lower bits in
larger numbered registers. For example a 32-bit number requires two registers. If the register
address for this number is <code>0</code> and the server is updated to hold the value <code>0x12345678</code> then
registers <code>0-1</code> will look like this:</p>
<div class="highlight"><pre><span></span><code>0:  0x1234
1:  0x5678
</code></pre></div>
<h2 id="data-persistence"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.3</span> Data persistence<a class="headerlink" href="#data-persistence" title="Permanent link">¶</a></h2>
<p>By default the Modbus Server data is <strong>not</strong> preserved when SolarNode restarts. That
means all registers are effectively cleared to <code>0</code> when SolarNode restarts. If you would like to
have the registers preserved instead, a <code>ModbusRegisterDao</code> service must be available at
runtime. The <a href="https://github.com/SolarNetwork/solarnetwork-node/tree/develop/net.solarnetwork.node.io.modbus.server.dao.jdbc">Modbus Server Persistence (JDBC)</a>
plugin provides this.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The Modbus Server Persistence (JDBC) plugin is included in the
<a href="https://github.com/SolarNetwork/solarnode-os-packages/tree/develop/solarnode-app-io-modbus-server-db-jdbc/debian">solarnode-app-io-modbus-server-db-jdbc</a> package in SolarNodeOS.</p>
</div>
<p>With or without persistence configured, Modbus Server serves all requests from an in-memory
register database. If the <code>ModbusRegisterDao</code> service is available, updates to the in-memory
database are then also persisted to that service.</p>
<h2 id="csv-configurer"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.4</span> CSV Configurer<a class="headerlink" href="#csv-configurer" title="Permanent link">¶</a></h2>
<p>This plugin provides <strong>Modbus Server (RTU) CSV Configurer</strong> and <strong>Modbus Server (TCP) CSV
Configurer</strong> components that will appear on the <a href="../../setup-app/settings/services/">Settings &gt; Services</a> page. These
components let you upload a CSV file to configure all Modbus Server components, without having to
use the <a href="#settings">settings</a> form.</p>
<figure>
<p><img alt="RTU and TCP CSV Configurer settings" loading="lazy" src="../../../images/users/io/modbus-servers-csv-configurer%402x.png" width="876"/></p>
</figure>
<h3 id="modbus-server-csv-configuration-format"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.4.1</span> Modbus Server CSV Configuration Format<a class="headerlink" href="#modbus-server-csv-configuration-format" title="Permanent link">¶</a></h3>
<p>The Modbus Server CSV Configuration uses the column structure detailed
<a href="#csv-column-definition">below</a>, with each row representing an individual datum property to expose
in Modbus server registers. A header row is required. Comment lines are allowed, just start the line
with a <code>#</code> character (i.e. the first cell value). The entire comment line will be ignored.</p>
<p>Here's an example screen shot of a TCP configuration in a spreadsheet application. It is for one server
with one unit with two register blocks:</p>
<ol>
<li>A <strong>Holding</strong> register block starting at register <code>0</code> with 3 datum properties: <code>watts</code>, <code>wattHours</code>, and <code>voltage</code></li>
<li>An <strong>Input</strong> register block starting at register <code>100</code> with 2 datum properties: <code>frequency</code> and <code>current</code></li>
</ol>
<p>Spreadsheet applications generally allows you to export the sheet in the CSV format, which can then
be loaded into SolarNode via the CSV Configurer.</p>
<figure>
<p><img alt="CSV Configuration example" loading="lazy" src="../../../images/users/io/modbus-tcp-server-csv-configuration-example-sheet%402x.png" width="1098"/></p>
</figure>
<div class="admonition tip example sheet">
<p class="admonition-title">Tip</p>
<p>You can copy the <a href="https://docs.google.com/spreadsheets/d/1m1G6j0CcJ6vOY1K79og_3mpIBxhGZHhXtDbA4UGez0U">TCP example sheet</a> or <a href="https://docs.google.com/spreadsheets/d/1e3yqWtH7D_eGF_mWyQd7qeH8xoojN-RJhgUwClrHPTY">RTU example
sheet</a> to get started.</p>
</div>
<h4 id="instance-identifiers"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.4.1.1</span> Instance identifiers<a class="headerlink" href="#instance-identifiers" title="Permanent link">¶</a></h4>
<p>Individual Modbus Device components are defined by the first column (<strong>Instance ID</strong>). You can
assign any identifier you like (such as <code>Meter</code>, <code>Inverter</code>, and so on) or configure as a single
dash character <code>-</code> to have SolarNode assign a simple number identifier. Once an Instance ID has been
assigned on a given row, subsequent rows will use that value if the corresponding cell value is left
empty.</p>
<h4 id="csv-column-definition"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.4.1.2</span> CSV column definition<a class="headerlink" href="#csv-column-definition" title="Permanent link">¶</a></h4>
<p>The following table defines all the CSV columns used by Modbus Server CSV Configuration. Columns
<strong>A - D</strong> apply to the <strong>entire Modbus Server configuration</strong>, and only the values from the row that
defines a new Instance ID will be used to configure the server. Thus you can omit the values from
these columns when defining more than one register for a given server.</p>
<p>Columns <strong>E - N</strong> define the mapping of datum properties to Modbus registers: each row defines an
individual datum property which occupies one or more Modbus registers.</p>
<div class="admonition info">
<p class="admonition-title">RTU and TCP servers use same CSV structure</p>
<p>The TCP and RTU servers use the same CSV column structure. For RTU the <strong>Bind Address</strong> column
is used for the serial port name and the <strong>Port</strong> column is unused.</p>
</div>
<table>
<thead>
<tr>
<th style="text-align: left;">Col</th>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Default</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>A</code></td>
<td style="text-align: left;"><strong>Instance ID</strong></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">The unique identifier for a single Modbus Server component. Can specify <code>-</code> to automatically assign a simple number value, which will start at <code>1</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>B</code></td>
<td style="text-align: left;"><strong>Bind Address</strong></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"><code>0.0.0.0</code></td>
<td style="text-align: left;">For TCP, the IP address or host name to listen on. Set to <code>0.0.0.0</code> to listen on all available addresses. For RTU, the <strong>Service name</strong> of the <a href="../modbus/#serial-rtu">Modbus serial connection</a> component to use.</td>
</tr>
<tr>
<td style="text-align: left;"><code>C</code></td>
<td style="text-align: left;"><strong>Port</strong></td>
<td style="text-align: left;">integer</td>
<td style="text-align: left;"><code>502</code></td>
<td style="text-align: left;">For TCP, the port number to listen on. See <a href="#solarnodeos-port-considerations">port considerations</a> for more info. For RTU this column is ignored.</td>
</tr>
<tr>
<td style="text-align: left;"><code>D</code></td>
<td style="text-align: left;"><strong>Throttle</strong></td>
<td style="text-align: left;">integer</td>
<td style="text-align: left;"><code>100</code></td>
<td style="text-align: left;">A number of <strong>milliseconds</strong> to throttle client requests by.</td>
</tr>
<tr>
<td style="text-align: left;"><code>E</code></td>
<td style="text-align: left;"><strong>Unit ID</strong></td>
<td style="text-align: left;">integer</td>
<td style="text-align: left;"><code>1</code></td>
<td style="text-align: left;">The Modbus unit ID from <code>0</code> - <code>255</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>F</code></td>
<td style="text-align: left;"><strong>Register Type</strong></td>
<td style="text-align: left;">enum</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">The Modbus register type. Must be one of <code>Coil</code>, <code>Discrete Input</code>, <code>Holding</code>, or <code>Input</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>G</code></td>
<td style="text-align: left;"><strong>Register</strong></td>
<td style="text-align: left;">integer</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">The starting register address for the property value (zero-based). For multi-register data types this is the <em>first</em> register the property value will be available at.</td>
</tr>
<tr>
<td style="text-align: left;"><code>H</code></td>
<td style="text-align: left;"><strong>Data Type</strong></td>
<td style="text-align: left;">enum</td>
<td style="text-align: left;"><code>u16</code></td>
<td style="text-align: left;">The type of data to encode the datum property value into. Must be one of <code>Boolean</code> or <code>bit</code>, <code>16-bit float</code> or <code>f16</code>, <code>32-bit float</code> or <code>f32</code>, <code>16-bit signed int</code> or <code>i16</code>, <code>16-bit unsigned int</code> or <code>u16</code>, <code>32-bit signed int</code> or <code>i32</code>, <code>32-bit unsigned int</code> or <code>u32</code>, <code>64-bit signed int</code> or <code>i64</code>, <code>64-bit unsigned int</code> or <code>u16</code>, <code>Bytes</code> or <code>b</code>, <code>String UTF-8</code> or <code>s</code>, <code>String ASCII</code> or <code>a</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>I</code></td>
<td style="text-align: left;"><strong>Data Length</strong></td>
<td style="text-align: left;">integer</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">For variable-length data types such as strings, the number of Modbus registers to encode the datum property value into. For fixed-length data types this column is ignored.</td>
</tr>
<tr>
<td style="text-align: left;"><code>J</code></td>
<td style="text-align: left;"><strong>Source ID</strong></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">The datum source ID that holds the property to expose.</td>
</tr>
<tr>
<td style="text-align: left;"><code>K</code></td>
<td style="text-align: left;"><strong>Property</strong></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">The name of the datum property to to encode into Modbus registers.</td>
</tr>
<tr>
<td style="text-align: left;"><code>L</code></td>
<td style="text-align: left;"><strong>Multiplier</strong></td>
<td style="text-align: left;">decimal</td>
<td style="text-align: left;"><code>1</code></td>
<td style="text-align: left;">For numeric data types, a multiplier to apply to the datum property value to normalize it into a standard unit.</td>
</tr>
<tr>
<td style="text-align: left;"><code>M</code></td>
<td style="text-align: left;"><strong>Decimal Scale</strong></td>
<td style="text-align: left;">integer</td>
<td style="text-align: left;"><code>0</code></td>
<td style="text-align: left;">For numeric data types, a maximum number of decimal places to round decimal numbers to, or <code>-1</code> to not do any rounding.</td>
</tr>
<tr>
<td style="text-align: left;"><code>N</code></td>
<td style="text-align: left;"><strong>Control ID</strong></td>
<td style="text-align: left;">string</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">A control ID to expose the property as. Can specify <code>-</code> to use the <strong>Source ID</strong> or <code>+</code> to use the pattern <strong><em>Source ID/Property</em></strong>. See <a href="#controls">Controls</a> for more information.</td>
</tr>
</tbody>
</table>
<h3 id="example-csv"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.4.2</span> Example CSV<a class="headerlink" href="#example-csv" title="Permanent link">¶</a></h3>
<p>Here is the CSV as shown in the previous TCP example configuration screen shot:</p>
<div class="highlight"><pre><span></span><code>Instance ID,Bind Address,Port,Throttle,Unit ID,Register Type,Register,Data Type,Data Length,Source ID,Property,Multiplier,Decimal Scale
1,0.0.0.0,5020,100,1,Holding,0,UInt16,1,Mock Energy Meter,watts,1,0
,,,,,,,UInt64,4,Mock Energy Meter,wattHours,1,0
,,,,,,,Float32,2,Mock Energy Meter,voltage,1,3
,,,,,Input,100,UInt32,1,Mock Energy Meter,frequency,10,0
,,,,,,,Float32,2,Mock Energy Meter,current,1,-1
</code></pre></div>
<h3 id="additional-server-settings"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.4.3</span> Additional server settings<a class="headerlink" href="#additional-server-settings" title="Permanent link">¶</a></h3>
<p>Other <a href="#tcp-settings">TCP server settings</a> or <a href="#rtu-settings">RTU server settings</a> like <strong>Service
Name</strong> or <strong>Allow Writes</strong> can be configured with special <code>#param</code> comment rows <strong>preceeding</strong> the
start of a instance. You configure just 3 columns in these rows:</p>
<ol>
<li>The literal string <code>#param</code></li>
<li>The <strong>setting key</strong></li>
<li>The <strong>setting value</strong></li>
</ol>
<p>The supported <strong>setting key</strong> values match the setting names generated when exporting SolarNode
settings for the Modbus Service component:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Setting</th>
<th style="text-align: left;">Key</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Service Name</td>
<td style="text-align: left;"><code>uid</code></td>
<td style="text-align: left;">Arbitrary string</td>
</tr>
<tr>
<td style="text-align: left;">Service Group</td>
<td style="text-align: left;"><code>groupUid</code></td>
<td style="text-align: left;">Arbitrary string</td>
</tr>
<tr>
<td style="text-align: left;">Startup Delay</td>
<td style="text-align: left;"><code>startupDelay</code></td>
<td style="text-align: left;">Number (seconds)</td>
</tr>
<tr>
<td style="text-align: left;">Allow Writes</td>
<td style="text-align: left;"><code>allowWrites</code></td>
<td style="text-align: left;">Either <code>true</code> or <code>false</code></td>
</tr>
<tr>
<td style="text-align: left;">Persistence Needed</td>
<td style="text-align: left;"><code>daoRequired</code></td>
<td style="text-align: left;">Either <code>true</code> or <code>false</code></td>
</tr>
<tr>
<td style="text-align: left;">Strict Unit IDs</td>
<td style="text-align: left;"><code>restrictUnitIds</code></td>
<td style="text-align: left;">Either <code>true</code> or <code>false</code></td>
</tr>
<tr>
<td style="text-align: left;">Strict Addresses</td>
<td style="text-align: left;"><code>restrictAddresses</code></td>
<td style="text-align: left;">Either <code>true</code> or <code>false</code></td>
</tr>
<tr>
<td style="text-align: left;">Wire Logging</td>
<td style="text-align: left;"><code>wireLogging</code></td>
<td style="text-align: left;">Either <code>true</code> or <code>false</code></td>
</tr>
</tbody>
</table>
<p>Here is the CSV as shown in the example configuration screen shot above, with some additional
settings:</p>
<div class="highlight"><pre><span></span><code>Instance ID,Bind Address,Port,Throttle,Unit ID,Register Type,Register,Data Type,Data Length,Source ID,Property,Multiplier,Decimal Scale
#param,uid,My Server
#param,allowWrites,true
#param,daoRequired,true
#param,restrictUnitIds,true
1,0.0.0.0,5020,100,1,Holding,0,UInt16,1,Mock Energy Meter,watts,1,0
,,,,,,,UInt64,4,Mock Energy Meter,wattHours,1,0
,,,,,,,Float32,2,Mock Energy Meter,voltage,1,3
,,,,,Input,100,UInt32,1,Mock Energy Meter,frequency,10,0
,,,,,,,Float32,2,Mock Energy Meter,current,1,-1
</code></pre></div>
<h2 id="settings"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.5</span> Settings<a class="headerlink" href="#settings" title="Permanent link">¶</a></h2>
<p>To manage RTU or TCP server configurations in the SolarNode UI, the settings in the following sections are available.</p>
<h3 id="rtu-settings"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.5.1</span> RTU settings<a class="headerlink" href="#rtu-settings" title="Permanent link">¶</a></h3>
<p>The RTU server configuration defines the serial port to use.</p>
<figure>
<p><img alt="RTU server settings" loading="lazy" src="../../../images/users/io/modbus-rtu-server-settings%402x.png" width="872"/></p>
</figure>
<p>Each server configuration contains the following settings:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Setting</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Service Name</td>
<td style="text-align: left;">A unique name to identify this data source with.</td>
</tr>
<tr>
<td style="text-align: left;">Service Group</td>
<td style="text-align: left;">A group name to associate this data source with.</td>
</tr>
<tr>
<td style="text-align: left;">Serial Connection</td>
<td style="text-align: left;">The <strong>Service Name</strong> of the Modbus Serial Connection component to use.</td>
</tr>
<tr>
<td style="text-align: left;">Request Throttle</td>
<td style="text-align: left;">A number of <strong>milliseconds</strong> to limit client requests by.</td>
</tr>
<tr>
<td style="text-align: left;">Startup Delay</td>
<td style="text-align: left;">A number of <strong>seconds</strong> to delay starting up the server after the plugin starts, after any configuration change, or after any message validation failure.</td>
</tr>
<tr>
<td style="text-align: left;">Allow Writes</td>
<td style="text-align: left;">If enabled, then allow Modbus clients to write to coil and output registers.</td>
</tr>
<tr>
<td style="text-align: left;">Persistence Needed</td>
<td style="text-align: left;">If enabled, then only start the server if data persistence is available. The <strong>Service Name</strong> must also be configured in this case.</td>
</tr>
<tr>
<td style="text-align: left;">Strict Unit IDs</td>
<td style="text-align: left;">If enabled, then ignore requests for any Unit ID that is not configured.</td>
</tr>
<tr>
<td style="text-align: left;">Strict Addresses</td>
<td style="text-align: left;">If enabled, then respond to read Input or Holding requests for addresses that have no value available with a <em>Modbus Illegal Data Address</em> error.</td>
</tr>
<tr>
<td style="text-align: left;">Wire Logging</td>
<td style="text-align: left;">Toggle wire-level message logging. <code>TRACE</code> level logging must also be enabled for the <code>net.solarnetwork.io.modbus.server.X</code> log name, where <code>X</code> is the serial port device name of the server to log messages for.</td>
</tr>
<tr>
<td style="text-align: left;">Units</td>
<td style="text-align: left;">The list of <a href="#unit-configuration">unit configurations</a>.</td>
</tr>
</tbody>
</table>
<h3 id="tcp-settings"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.5.2</span> TCP settings<a class="headerlink" href="#tcp-settings" title="Permanent link">¶</a></h3>
<p>The TCP server configuration defines the port number and address to listen on.</p>
<figure>
<p><img alt="TCP server settings" loading="lazy" src="../../../images/users/io/modbus-tcp-server-settings%402x.png" width="872"/></p>
</figure>
<p>Each server configuration contains the following settings:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Setting</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Service Name</td>
<td style="text-align: left;">A unique name to identify this data source with.</td>
</tr>
<tr>
<td style="text-align: left;">Service Group</td>
<td style="text-align: left;">A group name to associate this data source with.</td>
</tr>
<tr>
<td style="text-align: left;">Bind Address</td>
<td style="text-align: left;">The IP address or host name to listen on. Set to <code>0.0.0.0</code> to listen on all available addresses.</td>
</tr>
<tr>
<td style="text-align: left;">Port</td>
<td style="text-align: left;">The port number to listen on. The default Modbus port is <code>502</code>. See <a href="#solarnodeos-port-considerations">port considerations</a> for more info.</td>
</tr>
<tr>
<td style="text-align: left;">Request Throttle</td>
<td style="text-align: left;">A number of milliseconds to limit client requests by.</td>
</tr>
<tr>
<td style="text-align: left;">Startup Delay</td>
<td style="text-align: left;">A number of <strong>seconds</strong> to delay starting up the server after the plugin starts, after any configuration change.</td>
</tr>
<tr>
<td style="text-align: left;">Allow Writes</td>
<td style="text-align: left;">If enabled, then allow Modbus clients to write to coil and output registers.</td>
</tr>
<tr>
<td style="text-align: left;">Persistence Needed</td>
<td style="text-align: left;">If enabled, then only start the server if data persistence is available. The <strong>Service Name</strong> must also be configured in this case.</td>
</tr>
<tr>
<td style="text-align: left;">Strict Unit IDs</td>
<td style="text-align: left;">If enabled, then ignore requests for any Unit ID that is not configured.</td>
</tr>
<tr>
<td style="text-align: left;">Strict Addresses</td>
<td style="text-align: left;">If enabled, then respond to read Input or Holding requests for addresses that have no value available with a <em>Modbus Illegal Data Address</em> error.</td>
</tr>
<tr>
<td style="text-align: left;">Wire Logging</td>
<td style="text-align: left;">Toggle wire-level message logging. <code>TRACE</code> level logging must also be enabled for the <code>net.solarnetwork.io.modbus.server.X</code> log name, where <code>X</code> is the <strong>Port</strong> number of the server to log messages for.</td>
</tr>
<tr>
<td style="text-align: left;">Units</td>
<td style="text-align: left;">The list of <a href="#unit-configuration">unit configurations</a>.</td>
</tr>
</tbody>
</table>
<h3 id="solarnodeos-port-considerations"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.5.3</span> SolarNodeOS port considerations<a class="headerlink" href="#solarnodeos-port-considerations" title="Permanent link">¶</a></h3>
<p>By default SolarNodeOS has a built-in firewall enabled that will not allow access to arbitrary TCP
ports. Additionally, the SolarNode service runs as an unprivileged user that cannot listen on ports
less than 1024. To work around these issues, you should use a port number 1024 or higher, for
example <code>5020</code>. Then you must open that port in the SolarNodeOS firewall, which by default is
<code>nftables</code> and configured via the <code>/etc/nftables.conf</code> file. You can use a NAT rule in the firewall
to redirect port <code>502</code> to your configured port, so Modbus clients use the standard port of <code>502</code>. To
open port <code>502</code> and redirect to <code>5020</code> like in this example, you'd add the following lines, after
the existing ones that open ports 80 and 8080:</p>
<div class="highlight"><pre><span></span><code># Allows Modbus
add rule ip filter INPUT tcp dport 502 counter accept
add rule ip filter INPUT tcp dport 5020 counter accept
</code></pre></div>
<p>You'd then add the following NAT lines at the end:</p>
<div class="highlight"><pre><span></span><code># Redirect port 502 to 5020 for SolarNode Modbus server
add rule ip nat prerouting tcp dport 502 redirect to 5020
</code></pre></div>
<h3 id="unit-configuration"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.5.4</span> Unit configuration<a class="headerlink" href="#unit-configuration" title="Permanent link">¶</a></h3>
<p>Each RTU and TCP Modbus server can support up to 256 unit configurations, numbered from <code>0</code> - <code>255</code>.</p>
<figure>
<p><img alt="Unit settings" loading="lazy" src="../../../images/users/io/modbus-tcp-server-unit-settings%402x.png" width="854"/></p>
</figure>
<p>Each unit configuration contains the following settings:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Setting</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Unit ID</td>
<td style="text-align: left;">The Modbus Unit ID to use for the configured blocks, from <code>0</code> - <code>255</code>.</td>
</tr>
<tr>
<td style="text-align: left;">Register Blocks</td>
<td style="text-align: left;">The list of <a href="#register-block-configuration">register block configurations</a>.</td>
</tr>
</tbody>
</table>
<h3 id="register-block-configuration"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.5.5</span> Register block configuration<a class="headerlink" href="#register-block-configuration" title="Permanent link">¶</a></h3>
<p>Register blocks are sets of contiguous Modbus registers. You configure a starting address and then
each measurement configuration added to the block is mapped to Modbus registers based on the size
required by each measurement.</p>
<figure>
<p><img alt="Register block settings" loading="lazy" src="../../../images/users/io/modbus-tcp-server-register-block-settings%402x.png" width="858"/></p>
</figure>
<p>Each register block configuration contains the following settings:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Setting</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Start Address</td>
<td style="text-align: left;">The starting Modbus address for this register block, from <code>0</code> - <code>65,535</code>.</td>
</tr>
<tr>
<td style="text-align: left;">Register Type</td>
<td style="text-align: left;">The Modbus register type for this block (e.g. <em>holding</em>).</td>
</tr>
<tr>
<td style="text-align: left;">Measurements</td>
<td style="text-align: left;">The list of <a href="#measurement-configuration">measurement configurations</a>.</td>
</tr>
</tbody>
</table>
<h3 id="measurement-configuration"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.5.6</span> Measurement configuration<a class="headerlink" href="#measurement-configuration" title="Permanent link">¶</a></h3>
<p>Measurement configurations define what data is made available in Modbus. They work by mapping
properties of datum, collected by other SolarNode plugins, to Modbus registers. Thus you must
configure the datum source ID and property name of each value you want to publish via Modbus.</p>
<figure>
<p><img alt="Measurement settings" loading="lazy" src="../../../images/users/io/modbus-tcp-server-measurement-settings%402x.png" width="840"/></p>
</figure>
<p>Each measurement configuration contains the following settings:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Setting</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Source ID</td>
<td style="text-align: left;">The datum source ID that contains the <strong>Property</strong> value to publish via Modbus.</td>
</tr>
<tr>
<td style="text-align: left;">Property</td>
<td style="text-align: left;">The datum property to publish via Modbus.</td>
</tr>
<tr>
<td style="text-align: left;">Data Type</td>
<td style="text-align: left;">The type of data to expect from the read Modbus register(s).</td>
</tr>
<tr>
<td style="text-align: left;">Data Length</td>
<td style="text-align: left;">For variable length data types such as strings, the number of Modbus registers to read.</td>
</tr>
<tr>
<td style="text-align: left;">Unit Multiplier</td>
<td style="text-align: left;">For numeric data types, a multiplier to apply to the Modbus value to normalize it into a standard unit.</td>
</tr>
<tr>
<td style="text-align: left;">Decimal Scale</td>
<td style="text-align: left;">For numeric data types, a maximum number of decimal places to round decimal numbers to.</td>
</tr>
<tr>
<td style="text-align: left;">Control ID</td>
<td style="text-align: left;">A control ID to expose the property as. Can specify <code>-</code> to use the <strong>Source ID</strong> or <code>+</code> to use the pattern <strong><em>Source ID/Property</em></strong>. See <a href="#controls">Controls</a> for more information.</td>
</tr>
</tbody>
</table>
<h2 id="controls"><span class="enumerate-headings-plugin enumerate-heading-plugin">51.6</span> Controls<a class="headerlink" href="#controls" title="Permanent link">¶</a></h2>
<p>If a <a href="#measurement-configuration">measurement</a> has a <strong>Control ID</strong> configured, then it will be
exposed as a control that can be queried and updated as a normal control. They will appear on the
<a href="../../setup-app/tools/controls/">Tools &gt; Controls</a> page in the SolarNode UI.</p>
<p>You can also use the <a href="https://github.com/SolarNetwork/solarnetwork/wiki/SolarUser-API#queue-instruction">SolarUser Instruction API</a> to update the measurement value by
issuing a <a href="https://github.com/SolarNetwork/solarnetwork/wiki/SolarUser-API-enumerated-types#setcontrolparameter"><code>SetControlParameter</code></a> instruction that includes a single
instruction parameter named the <strong>Control ID</strong> you configured for the control and the desired value
as the parameter value.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <strong>Allow Writes</strong> server setting does <strong>not</strong> apply to control updates — updating measurement
values though control updates are always allowed.</p>
</div>
<p>For example, to set the <code>test/float</code> control to <code>29.0</code> an HTTP <code>POST</code> like this would update the
value:</p>
<div class="highlight"><pre><span></span><code>POST /solaruser/api/v1/sec/instr/add/SetControlParameter

{"nodeId":123,"params":{"test/float":"29.0"}}
</code></pre></div>
<p>You can configure an explicit control ID or use one of these shortcuts to derive the control ID from
the source ID and/or property name:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Control ID</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>-</code></td>
<td style="text-align: left;">Use the <strong>Source ID</strong>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>+</code></td>
<td style="text-align: left;">Use the pattern <strong><em>Source ID/Property</em></strong>. For example if the Source ID is <code>meter/1</code> and the Property is <code>watts</code> then the control ID would be <code>meter/1/watts</code>.</td>
</tr>
</tbody>
</table>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "content.code.copy", "navigation.indexes", "navigation.instant", "navigation.path", "navigation.tracking", "toc.follow"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../../assets/javascripts/bundle.92b07e13.min.js"></script>
<script src="../../../js/open_in_new_tab.js"></script>
</body>
</html>